{% extends 'back/layout.html' %}
{% load static %}
{% load templatetag %}
{% load humanize %}
{% load hitcount_tags %}
{% block link %}

{% endblock link %}
{% block content %}
    <div class="dashboard-wrapper">
    <div class="dashboard-ecommerce">
        <div class="container-fluid dashboard-content ">
            <!-- ============================================================== -->
            <!-- pageheader  -->
            <!-- ============================================================== -->
            <div class="row">
                <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12">
                    <div class="page-header">
                        {% if request.user.is_superuser %}
                            <h2 class="pageheader-title">Admin Dashboard Template </h2>
                        {% else %}
                            <h2 class="pageheader-title">Blogger Dashboard Template </h2>
                        {% endif %}
{#                        <p class="pageheader-text">Nulla euismod urna eros, sit amet scelerisque torton lectus vel mauris facilisis faucibus at enim quis massa lobortis rutrum.</p>#}
                        <div class="page-breadcrumb">
                            <nav aria-label="breadcrumb">
                                <ol class="breadcrumb">
                                    <li class="breadcrumb-item"><a href="#" class="breadcrumb-link">Dashboard</a></li>
                                     {% if request.user.is_superuser %}
                                        <li class="breadcrumb-item active" aria-current="page">Admin Dashboard Template </li>
                                    {% else %}
                                        <li class="breadcrumb-item active" aria-current="page">Blogger Dashboard Template </li>
                                    {% endif %}
                                </ol>
                            </nav>
                        </div>
                    </div>
                </div>
            </div>
            <!-- ============================================================== -->
            <!-- end pageheader  -->
            <!-- ============================================================== -->
            <div class="ecommerce-widget">

                <div class="row">
                    <!-- ============================================================== -->
                    <!-- sales  -->
                    <!-- ============================================================== -->
                    <div class="col-xl-3 col-lg-3 col-md-6 col-sm-12 col-12">
                        <div class="card border-3 border-top border-top-primary">
                            <div class="card-body">
                                <h5 class="text-muted">Posts</h5>
                                <div class="metric-value d-inline-block">
                                    <h1 class="mb-1">{{ posts|length }}</h1>
                                </div>
                                <div class="metric-label d-inline-block float-right text-success font-weight-bold">
                                    <a href="{% url 'BLOGBACK:posts' %}" class="icon-circle-small icon-box-xs text-success bg-success-light">
                                        <i class="fa fa-fw fa-eye"></i>View
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- ============================================================== -->
                    <!-- end sales  -->
                    <!-- ============================================================== -->
                    <!-- ============================================================== -->
                    <!-- new customer  -->
                    <!-- ============================================================== -->
                    <div class="col-xl-3 col-lg-3 col-md-6 col-sm-12 col-12">
                        <div class="card border-3 border-top border-top-primary">
                            <div class="card-body">
                                <h5 class="text-muted">Comments</h5>
                                <div class="metric-value d-inline-block">
                                    <h1 class="mb-1">{{ comments|length }}</h1>
                                </div>
                                <div class="metric-label d-inline-block float-right text-success font-weight-bold">
                                    <a href="{% url 'BLOGBACK:comments' %}" class="icon-circle-small icon-box-xs text-success bg-success-light">
                                        <i class="fa fa-fw fa-eye"></i>View
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- ============================================================== -->
                    <!-- end new customer  -->
                    <!-- ============================================================== -->
                    <!-- ============================================================== -->
                    <!-- visitor  -->
                    <!-- ============================================================== -->
                    {% if request.user.is_superuser %}
                    <div class="col-xl-3 col-lg-3 col-md-6 col-sm-12 col-12">
                        <div class="card border-3 border-top border-top-primary">
                            <div class="card-body">
                                <h5 class="text-muted">Bloggers</h5>
                                <div class="metric-value d-inline-block">
                                    <h1 class="mb-1">{{ bloggers|length }}</h1>
                                </div>
                                <div class="metric-label d-inline-block float-right text-success font-weight-bold">
                                    <a href="{% url 'BLOGBACK:bloggers' %}" class="icon-circle-small icon-box-xs text-success bg-success-light">
                                        <i class="fa fa-fw fa-eye"></i>View
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                    {% endif %}
                    <!-- ============================================================== -->
                    <!-- end visitor  -->
                    <!-- ============================================================== -->
                    <!-- ============================================================== -->
                    <!-- total orders  -->
                    <!-- ============================================================== -->
                    <div class="col-xl-3 col-lg-3 col-md-6 col-sm-12 col-12">
                        <div class="card border-3 border-top border-top-primary">
                            <div class="card-body">
                                <h5 class="text-muted">Likes</h5>
                                <div class="metric-value d-inline-block">
                                    <h1 class="mb-1">{{ likes|length }}</h1>
                                </div>
                                <div class="metric-label d-inline-block float-right text-danger font-weight-bold">
{#                                    <a href="{% url 'BLOGBACK:posts' %}" class="icon-circle-small icon-box-xs text-success bg-success-light">#}
{#                                        <i class="fa fa-fw fa-eye"></i>View#}
{#                                    </a>                             #}
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-xl-3 col-lg-3 col-md-6 col-sm-12 col-12">
                        <div class="card border-3 border-top border-top-primary">
                            <div class="card-body">
                                <h5 class="text-muted">Subscribers</h5>
                                <div class="metric-value d-inline-block">
                                    <h1 class="mb-1">{{ newsletter|length }}</h1>
                                </div>
                                <div class="metric-label d-inline-block float-right text-danger font-weight-bold">
                                    <a href="{% url 'BLOGBACK:newsletter' %}" class="icon-circle-small icon-box-xs text-success bg-success-light">
                                        <i class="fa fa-fw fa-eye"></i>View
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-xl-3 col-lg-3 col-md-6 col-sm-12 col-12">
                        <div class="card border-3 border-top border-top-primary">
                            <div class="card-body">
                                <h5 class="text-muted">Contact us</h5>
                                <div class="metric-value d-inline-block">
                                    <h1 class="mb-1">1340</h1>
                                </div>
                                <div class="metric-label d-inline-block float-right text-danger font-weight-bold">
                                    <span class="icon-circle-small icon-box-xs text-danger bg-danger-light bg-danger-light "><i class="fa fa-fw fa-arrow-down"></i></span><span class="ml-1">4%</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-xl-3 col-lg-3 col-md-6 col-sm-12 col-12">
                        <div class="card border-3 border-top border-top-primary">
                            <div class="card-body">
                                <h5 class="text-muted">Editors Pick</h5>
                                <div class="metric-value d-inline-block">
                                    <h1 class="mb-1">{{ editorial_pick|length }}</h1>
                                </div>
                                <div class="metric-label d-inline-block float-right text-danger font-weight-bold">
                                    <a href="{% url 'BLOGBACK:edutorial_pick' %}" class="icon-circle-small icon-box-xs text-success bg-success-light">
                                                                            <i class="fa fa-fw fa-eye"></i>View
                                    </a>                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-xl-3 col-lg-3 col-md-6 col-sm-12 col-12">
                        <div class="card border-3 border-top border-top-primary">
                            <div class="card-body">
                                <h5 class="text-muted">Social Accounts</h5>
                                <div class="metric-value d-inline-block">
                                    <h1 class="mb-1">{{ social|length }}</h1>
                                </div>
                                <div class="metric-label d-inline-block float-right text-danger font-weight-bold">
                                    <a href="{% url 'BLOGBACK:social' %}" class="icon-circle-small icon-box-xs text-success bg-success-light">
                                        <i class="fa fa-fw fa-eye"></i>View
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- ============================================================== -->
                    <!-- end total orders  -->
                    <!-- ============================================================== -->
                </div>
                <div class="row">
                    <!-- ============================================================== -->

                    <!-- ============================================================== -->

                                  <!-- recent orders  -->
                    <!-- ============================================================== -->
                    <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12">
                        <div class="card">
                                 <h5 class="card-header d-flex justify-content-between">Recent Posts <a class="btn btn-sm btn-outline-secondary" href="{% url 'BLOGBACK:posts' %}"> See more</a></h5>


                            <div class="card-body ">
                                <div class="table-responsive">
                                    <table id="loadtb1" class="table loadtb table-striped table-bordered first">
                                         <thead>
                                            <tr>
                                                <th scope="col">#</th>
                                                <th scope="col">Img</th>
                                                <th scope="col">Title</th>
                                                <th scope="col">Category</th>
                                                <th style="width: 200px;" scope="col">Tags</th>
                                                <th scope="col">Status</th>
                                                <th scope="col">Hit Count</th>
                                                <th scope="col">Likes</th>
                                                <th scope="col">Comments</th>

                                                <th scope="col">Created_at</th>
{#                                                <th scope="col">Action</th>#}
                                            </tr>
                                        </thead>
                                        <tbody>
                                            {% for post in posts %}
                                                <div class="modal fade" id="deleteexampleModal{{ post.id }}" tabindex="-1" aria-labelledby="deleteexampleModalLabel{{ post.id }}" aria-hidden="true">
                                                      <div class="modal-dialog">
                                                        <div class="modal-content">
                                                          <div class="modal-header">
                                                            <h5 class="modal-title" id="exampleModalLabel">Delete Post</h5>
                                                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                              <span aria-hidden="true">&times;</span>
                                                            </button>
                                                          </div>
                                                          <div class="modal-body">
                                                             <p>Are You Sure You Want to delete</p>
                                                              <a href="{% url 'BLOGBACK:post_delete' post.id %}" class="btn-danger btn">Delete</a>
                                                          </div>
                                                        </div>
                                                      </div>
                                                    </div>
                                                <tr>
                                                <th scope="row">{{forloop.counter}}</th>
                                                <td>
                                                    <div style="width: 50px; height: 50px; border-radius: 10px; overflow: hidden">
                                                        <img loading="lazy" style="width: 100%; height: 100%; object-fit: contain" src="{{ post.post_image.url }}" alt="">
                                                    </div>
                                                </td>
                                                <td>{{post.title|title}}</td>
                                                <td>{{post.category.category}}</td>
                                                <td>
                                                    {% for tag in post.post_tag %}
                                                      <span style="padding: 5px 9px; border-radius: 10px; margin: 10px 3px; background-color: #d9d4d4; ">{{ tag.category.category|title }}</span>
                                                    {% endfor %}
                                                </td>
                                                <td>
                                                    <a class="change-status" data-post-id="{{ post.id }}" data-post-status="{{post.post_verify}}" href="">
                                                        <span  style="padding: 4px 6px; {% if post.post_verify|lower == 'inactive' %}background-color: red;{% else %}background-color: green;{% endif %} color: white; border-radius: 6px">
                                                            {{post.post_verify|title }}
                                                        </span>
                                                    </a>
                                                </td>
                                                <td>{% get_hit_count for  post %}</td>
                                                <td>{{ post.likecount }}</td>
                                                <td>{{ post.commentcount }}</td>
                                                <td>{{post.created_at|naturaltime}}</td>
{#                                                <td>#}
{#                                                    <a href="" data-toggle="modal" data-target="#viewexampleModalLabel{{ post.id }}" class="btn btn-info btn-sm rounded">View</a>#}
{#                                                    <a href="" data-toggle="modal"  data-target="#deleteexampleModal{{ post.id }}" class="btn btn-danger btn-sm rounded">Delete</a>#}
                                                    {#<a href="" data-toggle="modal" data-target="#editexampleModalLabel{{ post.id }}" class="btn btn-success btn-sm rounded">Edit</a>#}
{#                                                        <a href="" data-toggle="modal"  data-target="#deleteexampleModal{{ post.id }}" class="btn btn-danger btn-sm rounded">Delete</a>#}
{#                                                </td>#}
                                            </tr>
                                            {% endfor %}
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>



                    {% if request.user.is_superuser %}
                        <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12">
                            <div class="card">
                                <h5 class="card-header d-flex justify-content-between">Recent Bloggers <a class="btn btn-sm btn-outline-secondary" href="{% url 'BLOGBACK:bloggers' %}"> See more</a></h5>

                                <div class="card-body ">
                                    <div class="table-responsive">
                                        <table id="loadtb2" class="table loadtb table-striped table-bordered first">
                                            <thead>
                                                <tr>
                                                    <th scope="col">#</th>
                                                    <th scope="col">Profile</th>
                                                    <th scope="col">Name</th>
                                                    <th scope="col">County</th>
                                                    <th scope="col">Email</th>
                                                    <th scope="col">Phone</th>
                                                    <th scope="col">BirthDay</th>
                                                    <th scope="col">Gender</th>
                                                    <th scope="col">PostCount</th>
                                                    <th scope="col">Group Status</th>
                                                    <th scope="col">Active Status</th>
                                                    <th scope="col">Created_at</th>
{#                                                    <th scope="col">Action</th>#}
                                                </tr>
                                            </thead>
                                            <tbody>
                                                {% for blogger in bloggers %}
                                                    <tr>
                                                    <th scope="row">{{forloop.counter}}</th>
                                                    <td><img style="width: 50px; height: 50px; overflow: hidden; border-radius: 10px;" src="{{ blogger.profile_image.url }}" alt=""></td>
                                                    <td>{{blogger.first_name}} {{blogger.last_name}}</td>
                                                    <td>{{blogger.county.county }}</td>
                                                    <td><a href="mailto:{{blogger.email }}">{{blogger.email }}</a></td>
                                                    <td><a href="tel:{{blogger.phone_number }}">{{blogger.phone_number }}</a></td>
                                                    <td>{{blogger.date_of_birth }}</td>
                                                    <td>{{blogger.gender }}</td>

                                                    <td>
                                                        {% if blogger.group_status == 'BLOGGER' %}
                                                            {{blogger.postcount }}
                                                        {% else %}
                                                            Normal Viewer
                                                        {% endif %}
                                                    </td>
                                                    <td>
                                                        <a class="btn btn-sm
                                                        {% if blogger.group_status == 'BLOGGER' %}
                                                            btn-secondary
                                                        {% elif blogger.group_status == 'VIEWER' %}
                                                            btn-info
                                                        {% endif %}" href="{% url 'BLOGBACK:bloggers_group_status' blogger.id %}">{{blogger.group_status }}</a>
                                                    </td>
                                                    <td>
                                                        <a class="btn btn-sm {% if blogger.is_user_active == 'ACTIVATE' %}
                                                            btn-success
                                                        {% elif blogger.is_user_active == 'DEACTIVATE' %}
                                                            btn-danger
                                                        {% endif %}" href="{% url 'BLOGBACK:bloggers_active_status' blogger.id %}">{{blogger.is_user_active }}</a>
                                                    </td>
                                                    <td>{{blogger.created_at|naturaltime}}</td>
{#                                                    <td>#}
    {#                                                    <a href="" data-toggle="modal" data-target="#editexampleModalLabel{{ blogger.id }}" class="btn btn-success btn-sm rounded">Edit</a>#}
{#                                                        <a href="" data-toggle="modal"  data-target="#deleteexampleModal{{ blogger.id }}" class="btn btn-danger btn-sm rounded">Delete</a>#}
{#                                                    </td>#}
                                                </tr>
                                                {% endfor %}
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    {% endif %}

                     <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 ">
                            <div class="card">
                                <h5 class="card-header d-flex justify-content-between">Social Handles <a class="btn btn-sm btn-outline-secondary" href="{% url 'BLOGBACK:social' %}"> See more</a></h5>

                                <div class="card-body ">
                                    <div class="table-responsive">
                                        <table id="loadtb3" class="table loadtb table-striped table-bordered first">
                                             <thead>
                                            <tr>
                                                <th scope="col">#</th>
                                                <th scope="col">Icon</th>
                                                <th scope="col">Url</th>
                                                <th scope="col">Created_at</th>
{#                                                <th scope="col">Action</th>#}
                                            </tr>
                                        </thead>
                                             <tbody>
                                            {% for social in social %}
                                            <tr>
                                                <th scope="row">{{forloop.counter}}</th>
                                                <th scope="row">{{ social.icon|safe }}</th>
                                                <th scope="row">{{ social.url }}</th>

                                                <td>{{social.created_at|naturaltime}}</td>
{#                                                <td>#}
{#                                                    <a href="" data-toggle="modal" data-target="#bloggresocial{{ social.id }}" class="btn btn-success btn-sm rounded">Edit</a>#}
{#                                                    <a href="" data-toggle="modal"  data-target="#deletepost{{ social.id }}" class="btn btn-danger btn-sm rounded">Delete</a>#}
{#                                                </td>#}
                                            </tr>
                                            {% endfor %}
                                        </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 ">
                            <div class="card">
                                <h5 class="card-header d-flex justify-content-between">Editors Pick <a class="btn btn-sm btn-outline-secondary" href="{% url 'BLOGBACK:edutorial_pick' %}"> See more</a></h5>

                                <div class="card-body ">
                                    <div class="table-responsive">
                                        <table id="loadtb4" class="table loadtb table-striped table-bordered first">
                                            <thead>
                                            <tr>
                                                <th scope="col">#</th>
                                                <th scope="col">Img</th>
                                                <th scope="col">Title</th>
{#                                                <th scope="col">Category</th>#}
{#                                                <th style="width: 200px;" scope="col">Tags</th>#}
                                                <th scope="col">Status</th>
{#                                                <th scope="col">Hit Count</th>#}
                                                <th scope="col">Created_at</th>
{#                                                {% if request.user.is_superuser %}#}
{#                                                <th scope="col">Action</th>{% endif %}#}
                                            </tr>
                                        </thead>
                                            <tbody>
                                            {% for post in editorial_pick %}
                                                <div class="modal fade" id="deleteexampleModal{{ post.post.id }}" tabindex="-1" aria-labelledby="deleteexampleModalLabel{{ post.post.id }}" aria-hidden="true">
                                                      <div class="modal-dialog">
                                                        <div class="modal-content">
                                                          <div class="modal-header">
                                                            <h5 class="modal-title" id="exampleModalLabel">Delete Post</h5>
                                                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                              <span aria-hidden="true">&times;</span>
                                                            </button>
                                                          </div>
                                                          <div class="modal-body">
                                                             <p>Are You Sure You Want to delete</p>
                                                              <a href="{% url 'BLOGBACK:post_delete' post.id %}" class="btn-danger btn">Delete</a>
                                                          </div>
                                                        </div>
                                                      </div>
                                                    </div>
                                                <tr>
                                                <th scope="row">{{forloop.counter}}</th>
                                                <td>
                                                    <div style="width: 50px; height: 50px; border-radius: 10px; overflow: hidden">
                                                        <img loading="lazy" style="width: 100%; height: 100%; object-fit: contain" src="{{ post.post.post_image.url }}" alt="">
                                                    </div>
                                                </td>
                                                <td>{{post.post.title|title}}</td>
{#                                                <td>{{post.post.category.category}}</td>#}
{#                                                <td>#}
{#                                                    {% for tag in post.post_tag %}#}
{#                                                      <span style="padding: 5px 9px; border-radius: 10px; margin: 10px 3px; background-color: #d9d4d4; ">{{ tag.category.category|title }}</span>#}
{#                                                    {% endfor %}#}
{#                                                </td>#}
                                                <td>
                                                    <a class="change-status" data-post-id="{{ post.post.id }}" data-post-status="{{post.post.post_verify}}" href="">
                                                        <span  style="padding: 4px 6px; {% if post.post_verify|lower == 'inactive' %}background-color: red;{% else %}background-color: green;{% endif %} color: white; border-radius: 6px">
                                                            {{post.post.post_verify|title }}
                                                        </span>
                                                    </a>
                                                </td>
{#                                                <td>{% get_hit_count for  post %}</td>#}
                                                <td>{{post.post.created_at|naturaltime}}</td>
{#                                                    {% if request.user.is_superuser %}#}
{#                                                <td>#}
{##}
{#                                                    <a href="" data-toggle="modal" data-target="#viewexampleModalLabel{{ post.post.id }}" class="btn btn-info btn-sm rounded">View</a>#}
{#                                                    <a href="" data-toggle="modal"  data-target="#deleteexampleModal{{ post.post.id }}" class="btn btn-danger btn-sm rounded">Delete</a>#}
{##}
{#                                                    <a href="" data-toggle="modal" data-target="#editexampleModalLabel{{ post.id }}" class="btn btn-success btn-sm rounded">Edit</a>#}
{#                                                        <a href="" data-toggle="modal"  data-target="#deleteexampleModal{{ post.id }}" class="btn btn-danger btn-sm rounded">Delete</a>#}
{#                                                </td>{% endif %}#}
                                            </tr>
                                            {% endfor %}
                                        </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    <!-- ============================================================== -->
                    <!-- end recent orders  -->



                </div>




            </div>
        </div>
    </div>
    <!-- ============================================================== -->
    <!-- footer -->
    <!-- ============================================================== -->
    <div class="footer">
        <div class="container-fluid">
            <div class="row">
                <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12">
                     Copyright ©
                    <script>var c = new Date(); document.write(c.getFullYear())</script> Concept. All rights reserved.
                </div>

            </div>
        </div>
    </div>
    <!-- ============================================================== -->
    <!-- end footer -->
    <!-- ============================================================== -->
</div>
{% endblock content %}
{% block script %}
{% endblock script %}